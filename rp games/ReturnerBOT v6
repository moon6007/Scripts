--originally By NathanReturns additions by mo_on


if not game:IsLoaded() then
	game:IsLoaded():wait()
end



if game.PlaceId == 1990228024 then
else
	game.StarterGui:SetCore("SendNotification", {
		Title = "Error!";
		Text = "ReturnerBOT does not Support this game.";
		Duration = 5;
	})
	error("a")
	return
end


local Character = game.Players.LocalPlayer.Character or game.Players.LocalPlayer.CharacterAdded:Wait()

Character:WaitForChild("HumanoidRootPart").CFrame = CFrame.new(6, 201, -274)



local Dir = game:GetService("CoreGui"):WaitForChild("RobloxPromptGui"):WaitForChild("promptOverlay")
local Settings
local DefaultSettings = {DisableAnimate="nil",AnimationPack="nil",rejoined="nil",botgoingto="nil",SmallMode="nil"}			
local why = {
	DisableAnimate = "nill",
	AnimationPack = "nill",
	rejoined = "nill",
	botgoingto = "nill",
	SmallMode = "nill",
}
local Parser = loadstring(game:HttpGet('https://raw.githubusercontent.com/moon734/Scripts/main/Parser'))()

function savea(data)
	print(data)
	Parser:save(game.Players.LocalPlayer.Name.."settings.ini", {
		data

	})
end
if  isfile(game.Players.LocalPlayer.Name.."settings.ini") then
else
	savea(why)
end
local Data = Parser:load(game.Players.LocalPlayer.Name.."settings.ini")

local botgoing = "starting"

function queueonteleport()
	queue_on_teleport([[
	         local Parser = loadstring(game:HttpGet('https://raw.githubusercontent.com/moon734/Scripts/main/Parser'))()

				local Data = Parser:load(game.Players.LocalPlayer.Name.."settings.ini")

				
               
                 getgenv().DisableAnimate = Data.DisableAnimate
                 getgenv().AnimationPack = Data.AnimationPack
                 getgenv().SmallMode = Data.SmallMode
                print(Data.botgoingto.." rejoin")
                 
                              
               
loadstring(game:HttpGet('https://raw.githubusercontent.com/moon6007/Scripts/main/rp%20games/ReturnerBOT%20v6'))()

                 
                 ]])
end
local rejoin = false



Dir.DescendantAdded:Connect(function(Err)
	if Err.Name == "ErrorTitle" then
		Err:GetPropertyChangedSignal("Text"):Connect(function()
			if Err.Text:sub(0, 12) == "Disconnected" then
				local why = {
					DisableAnimate = getgenv().DisableAnimate,
					AnimationPack = getgenv().AnimationPack, -- Corrected key name
					rejoined = "t",
					botgoingto = botgoing,
					SmallMode = getgenv().SmallMode,
				}
				savea(why)

				queueonteleport()

				wait(2)
				rejoin = true

			end
		end)
	end
end)









local room = {
	"Give me a room, please.",
	"I need a room right now.",
	"Can you help me find a room?",
	"I really need a room.",
	"Please arrange a room for me.",
	"Is it possible to get a room?",
	"I'm in search of a room.",
	"Could you assist with a room?",
	"PUT YOUR HANDS UP, THIS IS A ROBBERY.",
	"I want a room as soon as possible.",
	"I'm looking for a room, can you help?"
}


local cuffeds = {
	"What's your problem? Why cuff me?",
	"I demand an explanation! Why the cuffs?",
	"Are you kidding me? Why did you cuff me?",
	"This is outrageous! Why the handcuffs?",
	"You've got some nerve! Why am I cuffed?",
	"Explain yourself now! Why the cuffs?",
	"I'm furious! Why did you put these cuffs on me?",
	"You better have a good reason! Why the cuffs?",
	"I can't believe this! Why am I cuffed?",
	"What the heck? Why did you cuff me?"
}

local whyareyounotcleaningmyroom = {
	"WHY AREN'T YOU CLEANING MY ROOM? YOU'RE A HOUSEKEEPER! CLEAN IT NOW!",
	"YOU'RE A HOUSEKEEPER, SO WHY ISN'T MY ROOM CLEAN? CLEAN IT RIGHT AWAY!",
	"ISN'T IT YOUR JOB AS A HOUSEKEEPER TO CLEAN MY ROOM? DO IT NOW!",
	"MY ROOM IS MESSY. SHOULDN'T YOU BE CLEANING IT AS A HOUSEKEEPER? CLEAN IT IMMEDIATELY!",
	"I HIRED YOU TO CLEAN MY ROOM. WHY ISN'T IT CLEAN YET? CLEAN IT NOW!",
	"WHY IS MY ROOM STILL DIRTY WHEN YOU'RE A HOUSEKEEPER? CLEAN IT THIS INSTANT!",
	"AS A HOUSEKEEPER, YOUR DUTY IS TO CLEAN MY ROOM, RIGHT? THEN CLEAN IT RIGHT NOW!",
	"MY ROOM NEEDS CLEANING, AND YOU'RE THE HOUSEKEEPER. CLEAN IT WITHOUT DELAY!",
	"YOU'RE MY HOUSEKEEPER, SO WHY IS MY ROOM A MESS? CLEAN IT IMMEDIATELY!",
	"WHY HAVEN'T YOU CLEANED MY ROOM YET? YOU'RE THE HOUSEKEEPER. DO IT NOW!",
	"I EXPECTED MY ROOM TO BE CLEAN BY NOW. YOU'RE THE HOUSEKEEPER, AFTER ALL. CLEAN IT!",
	"YOU'RE HIRED AS A HOUSEKEEPER. CLEAN MY ROOM, PLEASE, RIGHT NOW!",
	"I CAN'T UNDERSTAND WHY MY ROOM ISN'T CLEAN. YOU'RE THE HOUSEKEEPER, AREN'T YOU? CLEAN IT!",
	"MY ROOM IS IN DISARRAY. AREN'T YOU THE HOUSEKEEPER RESPONSIBLE FOR CLEANING IT? CLEAN IT NOW!",
	"WHY IS MY ROOM UNTOUCHED WHEN YOU'RE SUPPOSED TO BE THE HOUSEKEEPER? CLEAN IT IMMEDIATELY!",
	"MY ROOM IS A DISASTER, AND YOU'RE THE HOUSEKEEPER ON DUTY. CLEAN IT RIGHT AWAY!",
	"YOU'RE MY HOUSEKEEPER. MY ROOM SHOULD BE CLEAN BY NOW. CLEAN IT WITHOUT HESITATION!",
	"WHY HASN'T MY ROOM BEEN CLEANED? YOU'RE THE HOUSEKEEPER, RIGHT? CLEAN IT NOW!",
	"I HIRED YOU TO KEEP MY HOUSE CLEAN, INCLUDING MY ROOM. CLEAN IT IMMEDIATELY!",
	"MY ROOM IS A MESS, AND YOU'RE THE HOUSEKEEPER. DO YOUR JOB AND CLEAN IT NOW!",
	"WHY ISN'T MY ROOM CLEAN? YOU'RE THE HOUSEKEEPER! CLEAN IT THIS INSTANT!"
}



local function getRandomIndex(previousIndex,tablel)
	local index = math.random(#tablel)
	while index == previousIndex do
		index = math.random(#tablel)
	end
	return index
end
math.randomseed(os.time())
local previousIndex = 0


function checkifcanbuy()
	if tonumber(game:GetService("Players").LocalPlayer.PlayerGui.UIs.bucksDisplay.bucks.Text) >= 7 then
		return true
	end
	return false
end

function GetGun()
	local gun = game.Players.LocalPlayer.Backpack:FindFirstChild("Water Gun") or game.Players.LocalPlayer.Character:FindFirstChild("Water Gun")
	if not gun then
		if tonumber(game:GetService("Players").LocalPlayer.PlayerGui.UIs.bucksDisplay.bucks.Text) >= 7 then
			game:GetService("ReplicatedStorage").DataEvents.requestPurchase:FireServer("Water Gun")
			game.Players.LocalPlayer.Character:FindFirstChildWhichIsA("Humanoid"):EquipTool( game.Players.LocalPlayer.Backpack:WaitForChild("Water Gun"))
		end
	else
		game.Players.LocalPlayer.Character:FindFirstChildWhichIsA("Humanoid"):EquipTool( game.Players.LocalPlayer.Backpack:WaitForChild("Water Gun"))

	end

end

function say(tablel)
	local function getRandomIndexExcluding(previousIndex, tablel, excludedIndices)
		local newIndex
		repeat
			newIndex = math.random(1, #tablel)
		until newIndex ~= previousIndex and not excludedIndices[newIndex]
		return newIndex
	end

	local excludedIndices = {}
	local index = getRandomIndexExcluding(previousIndex, tablel, excludedIndices)
	local selectedMessage = tablel[index]

	table.insert(excludedIndices, index)

	previousIndex = index
	if selectedMessage == "PUT YOUR HANDS UP, THIS IS A ROBBERY." and checkifcanbuy() then
		GetGun()
		game:GetService("ReplicatedStorage").DefaultChatSystemChatEvents.SayMessageRequest:FireServer(selectedMessage, "All")
		task.wait(3)
		game.Players.LocalPlayer.Character:FindFirstChildWhichIsA("Humanoid"):UnequipTools()
	else
		local newIndex = getRandomIndexExcluding(previousIndex, tablel, excludedIndices)
		selectedMessage = tablel[newIndex]
		table.insert(excludedIndices, newIndex)

		game:GetService("ReplicatedStorage").DefaultChatSystemChatEvents.SayMessageRequest:FireServer(selectedMessage, "All")
	end
end








game.Players.PlayerRemoving:Connect(function(plr)
	if plr.Name == game.Players.LocalPlayer.Name then
		if Dir:FindFirstChild("ErrorTitle") then
			if Dir:FindFirstChild("ErrorTitle").Text:sub(0, 12) == "Disconnected" then

				local why = {
					DisableAnimate = getgenv().DisableAnimate,
					AnimationPack = getgenv().AnimationPack, -- Corrected key name
					rejoined = "t",
					botgoingto = botgoing,
					SmallMode = getgenv().SmallMode,
				}
				savea(why)



				queueonteleport()

				wait(2)
				rejoin = true
			end
		end
	end
end)




if Data[1].rejoined == "t"  then
	print("rejoined")
	botgoing = Data[1].botgoingto
	Data[1].rejoined = "f"
end



spawn(function()
	game["Run Service"].RenderStepped:Connect(function()
		if rejoin == true then
			game:GetService("TeleportService"):TeleportToPlaceInstance(game.PlaceId, game.JobId, game.Players.LocalPlayer)
		end
	end)
end)

local plr = game:GetService("Players").LocalPlayer
if getgenv().DisableAnimate == true then
	Character.Animate.Disabled = true
end



local teleportPlaceId = 4483381587

local useridsres = game:HttpGet("https://raw.githubusercontent.com/moon4003/Bloxton/main/MR%2BHR%20userids%20auto%20update")

local userids = game:GetService("HttpService"):JSONDecode(useridsres)

for _,Player in pairs(game.Teams:WaitForChild("MRs"):GetPlayers()) do
	if table.find(userids,Player.UserId) then
		local message = "An HR or MR+ member has been detected, leaving to evade a server ban or pban..."

		game:GetService("ReplicatedStorage").DefaultChatSystemChatEvents.SayMessageRequest:FireServer(message, "All")

		game:GetService("RunService").RenderStepped:Connect(function()
			local teleportService = game:GetService("TeleportService")
			teleportService:Teleport(teleportPlaceId, game.Players.LocalPlayer)

		end)
	end
end



game.Teams:WaitForChild("MRs").PlayerAdded:Connect(function(Player)
	if table.find(userids,Player.UserId) then
		local message = "An HR or MR+ member has been detected, leaving to evade a server ban or pban..."

		game:GetService("ReplicatedStorage").DefaultChatSystemChatEvents.SayMessageRequest:FireServer(message, "All")

		game:GetService("RunService").RenderStepped:Connect(function()
			local teleportService = game:GetService("TeleportService")
			teleportService:Teleport(teleportPlaceId, game.Players.LocalPlayer)

		end)
	end
end)



local teleportLocations = {
	["starting"] = CFrame.new(50, 43, 89),
	["reg 2"] = CFrame.new(125, 44, 90),
	["reg 1"] = CFrame.new(119, 44, 90),
	["reg 2 ag"] = CFrame.new(118, 44, 74),
	["housekeeping"] = CFrame.new(29, 43, 88),
	["bar"] = CFrame.new(115, 44, 156),
	["reg2ag"] = CFrame.new(113, 44, 60),
	["reg1ag"] = CFrame.new(119, 44, 90),
	["reg2agag"] = CFrame.new(118, 44, 74)
}




local Players = game:GetService("Players").LocalPlayer
local LocalPlayer = game.Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local HRP = Character:FindFirstChild("HumanoidRootPart")





local staff = {}
local ranksWithHandCuffs = {7,9,10,11,12,14,15,16}

local teams = {"LRs", "MRs", "HRs"}

for _, teamName in pairs(teams) do
	local team = game:GetService("Teams"):WaitForChild(teamName)
	team.PlayerAdded:Connect(function(plr)
		print("added "..plr.Name)
		staff[plr] = plr:GetRankInGroup(2788849)
	end)
	team.PlayerRemoved:Connect(function(plr)
		print("removed "..plr.Name)
		staff[plr] = nil
	end)
	for _, player in pairs(team:GetPlayers()) do
		print("test")
		staff[player] = player:GetRankInGroup(2788849)
	end
end



local function GetClosestPlayerWithCuffs(range)
	local closestPlayer = nil
	local closestDistance = range -- Start with maximum range

	for player, rank in pairs(staff) do
		if player.Character and player.Character:FindFirstChild("HumanoidRootPart") and table.find(ranksWithHandCuffs,rank) and player.Character:FindFirstChild("Handcuffs") then
			local dist = player:DistanceFromCharacter(HRP.Position)

			if dist < closestDistance  then
				closestPlayer = player
				closestDistance = dist
			end
		end
	end

	return closestPlayer
end
task.spawn(function()
	while task.wait(.1) do
		local targetPlayer = GetClosestPlayerWithCuffs(10)
		if targetPlayer then
			wait(0.25)
			local args = {
				[1] = "Please don't cuff me, "..targetPlayer.Name..".",
				[2] = "All"
			}          
			game:GetService("ReplicatedStorage").DefaultChatSystemChatEvents.SayMessageRequest:FireServer(unpack(args))

		end
	end
end)


spawn(function()
	local location = teleportLocations[botgoing]
	if location then
		Character:WaitForChild("HumanoidRootPart").CFrame = location
	end
end)

botversion = "V6.testing"
local name = "Returner BOT"
game.ReplicatedStorage.DefaultChatSystemChatEvents.SayMessageRequest:FireServer("["..name.."]: "..botversion.." has loaded.","All")
game.StarterGui:SetCore("SendNotification", {
	Title = "Returner BOT";
	Text = "Returner BOT Loaded! originally By NathanReturns additions by mo_on";
	Duration = 5;
})



if getgenv().SmallMode == true then
	local args = {
		[1] = "Toddler"
	}

	game:GetService("ReplicatedStorage"):WaitForChild("DataEvents"):WaitForChild("sendMorphData"):FireServer(unpack(args))

end


local cuffed = false
local Player = plr

Player.CharacterAdded:Connect(function()
	repeat task.wait() until Player.Character
	Character = Player.Character
end)

local function ProcessArrestedChild()
	local character = game.Players.LocalPlayer.Character

	if character then
		local arrestedChild = character:FindFirstChild("Arrested")
		if arrestedChild and cuffed == false then

			say(cuffeds)
			local why = {
				DisableAnimate = getgenv().DisableAnimate,
				AnimationPack = getgenv().AnimationPack, -- Corrected key name
				rejoined = "t",
				botgoingto = botgoing,
				SmallMode = getgenv().SmallMode,
			}
			savea(why)

			queueonteleport()
			task.wait(1)
			--    loadstring(game:HttpGet("https://raw.githubusercontent.com/oldAccount894/private/main/hi.lua"))()

			game:GetService("TeleportService"):TeleportToPlaceInstance(game.PlaceId, game.JobId, game.Players.LocalPlayer)


		end
	end
end
spawn(function()
	while true do
		ProcessArrestedChild()
		wait(1)  -- Adjust the delay as needed
	end
end)


local LocalPlayer = game.Players.LocalPlayer
local Character = LocalPlayer.Character
local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")
local Humanoid = Character:WaitForChild("Humanoid")


for i,v in pairs(Humanoid:GetPlayingAnimationTracks()) do
	v:Stop()
end









local Animate = game.Players.LocalPlayer.Character.Animate 

if  getgenv().AnimationPack == "Knight" then

	Animate.idle.Animation1.AnimationId = "http://www.roblox.com/asset/?id=657595757"
	Animate.idle.Animation2.AnimationId = "http://www.roblox.com/asset/?id=657568135"
	Animate.walk.WalkAnim.AnimationId = "http://www.roblox.com/asset/?id=657552124"
	Animate.run.RunAnim.AnimationId = "http://www.roblox.com/asset/?id=657564596"
	Animate.jump.JumpAnim.AnimationId = "http://www.roblox.com/asset/?id=658409194"
	Animate.climb.ClimbAnim.AnimationId = "http://www.roblox.com/asset/?id=658360781"
	Animate.fall.FallAnim.AnimationId = "http://www.roblox.com/asset/?id=657600338"

elseif  getgenv().AnimationPack == "Astronaut" then
	Animate.idle.Animation1.AnimationId = "http://www.roblox.com/asset/?id=891621366"
	Animate.idle.Animation2.AnimationId = "http://www.roblox.com/asset/?id=891633237"
	Animate.walk.WalkAnim.AnimationId = "http://www.roblox.com/asset/?id=891667138"
	Animate.run.RunAnim.AnimationId = "http://www.roblox.com/asset/?id=891636393"
	Animate.jump.JumpAnim.AnimationId = "http://www.roblox.com/asset/?id=891627522"
	Animate.climb.ClimbAnim.AnimationId = "http://www.roblox.com/asset/?id=891609353"
	Animate.fall.FallAnim.AnimationId = "http://www.roblox.com/asset/?id=891617961"

elseif getgenv().AnimationPack == "Werewolf" then
	Animate.idle.Animation1.AnimationId = "http://www.roblox.com/asset/?id=1083195517"
	Animate.idle.Animation2.AnimationId = "http://www.roblox.com/asset/?id=1083214717"
	Animate.walk.WalkAnim.AnimationId = "http://www.roblox.com/asset/?id=1083178339"
	Animate.run.RunAnim.AnimationId = "http://www.roblox.com/asset/?id=1083216690"
	Animate.jump.JumpAnim.AnimationId = "http://www.roblox.com/asset/?id=1083218792"
	Animate.climb.ClimbAnim.AnimationId = "http://www.roblox.com/asset/?id=1083182000"
	Animate.fall.FallAnim.AnimationId = "http://www.roblox.com/asset/?id=1083189019"
end

local hum = Character:FindFirstChildWhichIsA("Humanoid")
if hum then
	hum.WalkSpeed = getgenv().walkspeed
end


if getgenv().noclip == true then
	local floor = Instance.new("Part")
	floor.Name = "CCFloor"
	floor.Size = Vector3.new(1000,1,1000)
	floor.Position = Vector3.new(0,40.6,0)
	floor.CanCollide = true
	floor.Transparency = 1
	floor.Parent = game.Workspace
	floor.Anchored = true

	for i,v in pairs(game.Workspace:GetDescendants()) do
		if v.Name ~= "CCFloor" and v.Name ~= "StaffArea" then
			pcall(function()
				v.CanCollide = false
			end)
		end
	end
end


for i,v in pairs(game.Workspace:GetDescendants()) do
	if v:IsA("Part") then
		if v.Name:match("Barrier") or v.Name == "NoSpamToolZone" then
			v:Destroy()
		end
	end
end







local pathfinding = game:GetService("PathfindingService")
local TeleportService = game:GetService("TeleportService")
spawn(function()
	while wait() do
		if game.Players.LocalPlayer.Character.Humanoid.Sit == true then game.Players.LocalPlayer.Character.Humanoid.Jump = true end

	end
end)
function walkto(pos)
	local AgentParams = {
		AgentCanJump = true,
		AgentRadius = 5,
		Costs = {
			seat = math.huge
		}
	}
	local path = pathfinding:CreatePath(AgentParams)
	path:ComputeAsync(game.Players.LocalPlayer.Character.PrimaryPart.Position - Vector3.new(0, game.Players.LocalPlayer.Character.PrimaryPart.Size.Y/0.75, 0), pos)
	local waypoints = path:GetWaypoints()
	for _, waypoint in pairs(waypoints) do  

		if waypoint.Action == Enum.PathWaypointAction.Jump then game.Players.LocalPlayer.Character.Humanoid.Jump = true print('jump') end
		game.Players.LocalPlayer.Character.Humanoid:MoveTo(waypoint.Position)
		game.Players.LocalPlayer.Character.Humanoid.MoveToFinished:Wait()


	end

end



local speed = getgenv().Speed
if botgoing == "starting" then
	spawn(function()
		walkto(Vector3.new(76, 44, 89))
	end)
	plr.Character.Humanoid.MoveToFinished:Wait()
	botgoing = "reg 2"
end






function reg2()
	walkto(Vector3.new(145, 44, 84))---walks to reg 2 2
	wait()
	say(room)
end


function reg1() -- aaa
	walkto(Vector3.new(145, 44, 71))
	wait ()
	say(room)
end


function reg2again() --aa
	walkto(Vector3.new(145, 44, 84))
	wait ()
	say(room)
end


function housekeeping() -- aa
	walkto(Vector3.new(30, 44, 87))
	walkto(Vector3.new(139, 44, 155))
	wait()

	pcall(function()
		local args = {
			[1] = "Can someone clean my room?",----asks for someone to clean room
			[2] = "All"
		}          
		game:GetService("ReplicatedStorage").DefaultChatSystemChatEvents.SayMessageRequest:FireServer(unpack(args))
	end)
	wait(1)

	say(whyareyounotcleaningmyroom)


end



function bar() -- aa
	walkto(Vector3.new(30, 44, 87)) ---------walk to bar
	walkto(Vector3.new(68, 43, 28)) ---------walk to seat

	pcall(function()
		local args = {
			[1] = "Could I have a Churro, Nachos and Chips please? ",----asks for food
			[2] = "All"
		}          
		game:GetService("ReplicatedStorage").DefaultChatSystemChatEvents.SayMessageRequest:FireServer(unpack(args))
	end
	)

	wait (speed)
	walkto(Vector3.new(68, 43, 19))
	pcall(function()
		local args = {
			[1] = "Can I get a Chocolate Milkshake, a Cookie and a bag of Nachos please? ",----asks for food
			[2] = "All"
		}          
		game:GetService("ReplicatedStorage").DefaultChatSystemChatEvents.SayMessageRequest:FireServer(unpack(args))
	end
	)
	wait (speed)
	walkto(Vector3.new(68, 43, 10))
	pcall(function()
		local args = {
			[1] = "Could I have a Churro, Nachos and Chips please? ",----asks for food
			[2] = "All"
		}          
		game:GetService("ReplicatedStorage").DefaultChatSystemChatEvents.SayMessageRequest:FireServer(unpack(args))
	end
	)
end


function reg2ag() -- aa
	walkto(Vector3.new(145, 44, 84))
	wait()
	say(room)
end


function reg1ag() -- aa
	walkto(Vector3.new(145, 44, 71))
	wait()
	say(room)
end


function reg2agag() 
	print("hi")
	walkto(Vector3.new(145, 44, 84))
	wait()

	say(room)
end
local transitions = {
	["reg 2"] = { func = reg2, nextBotgoing = "reg 1" },
	["reg 1"] = { func = reg1, nextBotgoing = "reg 2 ag" },
	["reg 2 ag"] = { func = reg2again, nextBotgoing = "housekeeping" },
	["housekeeping"] = { func = housekeeping, nextBotgoing = "bar" },
	["bar"] = { func = bar, nextBotgoing = "reg2ag" },
	["reg2ag"] = { func = reg2ag, nextBotgoing = "reg1ag" },
	["reg1ag"] = { func = reg1ag, nextBotgoing = "reg2agag" },
	["reg2agag"] = { func = reg2agag, nextBotgoing = "reg 2" }
}






local function executeFunction(func)
	pcall(func)
	wait(speed)
end
spawn(function()
	repeat wait(1)
		local transition = transitions[botgoing]
		if transition then
			executeFunction(transition.func)
			botgoing = transition.nextBotgoing
		end

	until false
end)

